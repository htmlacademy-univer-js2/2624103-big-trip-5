{"version":3,"file":"js/main.518cdeb86ac382b7e0c5.js","mappings":"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","sources":["webpack://big-trip/./src/framework/view/abstract-view.css","webpack://big-trip/./node_modules/css-loader/dist/runtime/api.js","webpack://big-trip/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://big-trip/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://big-trip/webpack/bootstrap","webpack://big-trip/webpack/runtime/compat get default export","webpack://big-trip/webpack/runtime/define property getters","webpack://big-trip/webpack/runtime/hasOwnProperty shorthand","webpack://big-trip/webpack/runtime/nonce","webpack://big-trip/./src/framework/view/abstract-view.css?dfa6","webpack://big-trip/./src/framework/view/abstract-view.js","webpack://big-trip/./src/framework/render.js","webpack://big-trip/./src/view/filters-view.js","webpack://big-trip/./src/view/sort-view.js","webpack://big-trip/./src/framework/view/abstract-stateful-view.js","webpack://big-trip/./src/const.js","webpack://big-trip/./src/utils/date.js","webpack://big-trip/./src/view/event-edit-view.js","webpack://big-trip/./src/view/event-view.js","webpack://big-trip/./src/utils/trip.js","webpack://big-trip/./src/view/trip-info-view.js","webpack://big-trip/./src/view/new-event-button-view.js","webpack://big-trip/./src/render.js","webpack://big-trip/./src/presenter/trip-presenter.js","webpack://big-trip/./src/model/events-model.js","webpack://big-trip/./src/model/destinations-model.js","webpack://big-trip/./src/model/offers-model.js","webpack://big-trip/./src/mock/destinations.js","webpack://big-trip/./src/mock/offers.js","webpack://big-trip/./src/mock/events.js","webpack://big-trip/./src/main.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".shake {\\n  animation: shake 0.6s;\\n  position: relative;\\n  z-index: 10;\\n}\\n\\n@keyframes shake {\\n  0%,\\n  100% {\\n    transform: translateX(0);\\n  }\\n\\n  10%,\\n  30%,\\n  50%,\\n  70%,\\n  90% {\\n    transform: translateX(-5px);\\n  }\\n\\n  20%,\\n  40%,\\n  60%,\\n  80% {\\n    transform: translateX(5px);\\n  }\\n}\\n.trip-events__item {\\n  transition: all 0.3s ease;\\n}\\n\\n.event--edit {\\n  background-color: #ffffff;\\n  border-radius: 4px;\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/framework/view/abstract-view.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF;AACA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,wCAAwC;AAC1C\",\"sourcesContent\":[\".shake {\\n  animation: shake 0.6s;\\n  position: relative;\\n  z-index: 10;\\n}\\n\\n@keyframes shake {\\n  0%,\\n  100% {\\n    transform: translateX(0);\\n  }\\n\\n  10%,\\n  30%,\\n  50%,\\n  70%,\\n  90% {\\n    transform: translateX(-5px);\\n  }\\n\\n  20%,\\n  40%,\\n  60%,\\n  80% {\\n    transform: translateX(5px);\\n  }\\n}\\n.trip-events__item {\\n  transition: all 0.3s ease;\\n}\\n\\n.event--edit {\\n  background-color: #ffffff;\\n  border-radius: 4px;\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nc = undefined;","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./abstract-view.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./abstract-view.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import {createElement} from '../render.js';\nimport './abstract-view.css';\n\n/** @const {string} Класс, реализующий эффект \"покачивания головой\" */\nconst SHAKE_CLASS_NAME = 'shake';\n\n/** @const {number} Время анимации в миллисекундах */\nconst SHAKE_ANIMATION_TIMEOUT = 600;\n\n/**\n * Абстрактный класс представления\n */\nexport default class AbstractView {\n  /** @type {HTMLElement|null} Элемент представления */\n  #element = null;\n\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error('Can\\'t instantiate AbstractView, only concrete one.');\n    }\n  }\n\n  /**\n   * Геттер для получения элемента\n   * @returns {HTMLElement} Элемент представления\n   */\n  get element() {\n    if (!this.#element) {\n      this.#element = createElement(this.template);\n    }\n\n    return this.#element;\n  }\n\n  /**\n   * Геттер для получения разметки элемента\n   * @abstract\n   * @returns {string} Разметка элемента в виде строки\n   */\n  get template() {\n    throw new Error('Abstract method not implemented: get template');\n  }\n\n  /** Метод для удаления элемента */\n  removeElement() {\n    this.#element = null;\n  }\n\n  /**\n   * Метод, реализующий эффект \"покачивания головой\"\n   * @param {shakeCallback} [callback] Функция, которая будет вызвана после завершения анимации\n   */\n  shake(callback) {\n    this.element.classList.add(SHAKE_CLASS_NAME);\n    setTimeout(() => {\n      this.element.classList.remove(SHAKE_CLASS_NAME);\n      callback?.();\n    }, SHAKE_ANIMATION_TIMEOUT);\n  }\n}\n\n/**\n * Функция, которая будет вызвана методом shake после завершения анимации\n * @callback shakeCallback\n */\n","//новый\nimport AbstractView from './view/abstract-view.js';\n\n/** @enum {string} Перечисление возможных позиций для отрисовки */\nconst RenderPosition = {\n  BEFOREBEGIN: 'beforebegin',\n  AFTERBEGIN: 'afterbegin',\n  BEFOREEND: 'beforeend',\n  AFTEREND: 'afterend',\n};\n\n/**\n * Функция для создания элемента на основе разметки\n * @param {string} template Разметка в виде строки\n * @returns {HTMLElement} Созданный элемент\n */\nfunction createElement(template) {\n  const newElement = document.createElement('div');\n  newElement.innerHTML = template;\n\n  return newElement.firstElementChild;\n}\n\n/**\n * Функция для отрисовки элемента\n * @param {AbstractView} component Компонент, который должен был отрисован\n * @param {HTMLElement} container Элемент в котором будет отрисован компонент\n * @param {string} place Позиция компонента относительно контейнера. По умолчанию - `beforeend`\n */\nfunction render(component, container, place = RenderPosition.BEFOREEND) {\n  if (!(component instanceof AbstractView)) {\n    throw new Error('Can render only components');\n  }\n\n  if (container === null) {\n    throw new Error('Container element doesn\\'t exist');\n  }\n\n  container.insertAdjacentElement(place, component.element);\n}\n\n/**\n * Функция для замены одного компонента на другой\n * @param {AbstractView} newComponent Компонент, который нужно показать\n * @param {AbstractView} oldComponent Компонент, который нужно скрыть\n */\nfunction replace(newComponent, oldComponent) {\n  if (!(newComponent instanceof AbstractView && oldComponent instanceof AbstractView)) {\n    throw new Error('Can replace only components');\n  }\n\n  const parent = oldComponent.element.parentElement;\n  if (!parent) {\n    throw new Error('Parent element doesn\\'t exist');\n  }\n\n  parent.replaceChild(newComponent.element, oldComponent.element);\n  oldComponent.removeElement(); // Важно удалить старый компонент\n}\n\n/**\n * Функция для удаления компонента\n * @param {AbstractView} component Компонент, который нужно удалить\n */\nfunction remove(component) {\n  if (component === null) {\n    return;\n  }\n\n  if (!(component instanceof AbstractView)) {\n    throw new Error('Can remove only components');\n  }\n\n  component.element.remove();\n  component.removeElement();\n}\n\nexport {RenderPosition, createElement, render, replace, remove};\n","import AbstractView from '../framework/view/abstract-view.js';\n\nexport default class FiltersView extends AbstractView {\n  constructor(filters, currentFilter) {\n    super();\n    this._filters = filters;\n    this._currentFilter = currentFilter;\n  }\n\n  get template() {\n    return `\n      <form class=\"trip-filters\" action=\"#\" method=\"get\">\n        ${this._filters.map((filter) => `\n          <div class=\"trip-filters__filter\">\n            <input \n              id=\"filter-${filter.type}\" \n              class=\"trip-filters__filter-input visually-hidden\" \n              type=\"radio\" \n              name=\"trip-filter\" \n              value=\"${filter.type}\"\n              ${filter.type === this._currentFilter ? 'checked' : ''}\n              ${filter.count === 0 ? 'disabled' : ''}\n            >\n            <label class=\"trip-filters__filter-label\" for=\"filter-${filter.type}\">\n              ${filter.name} ${filter.count > 0 ? `(${filter.count})` : ''}\n            </label>\n          </div>\n        `).join('')}\n      </form>\n    `;\n  }\n}","import AbstractView from '../framework/view/abstract-view.js';\n\nexport default class SortView extends AbstractView {\n  constructor(currentSortType) {\n    super();\n    this._currentSortType = currentSortType;\n    this._callback = {}; \n    this._handleSortTypeChange = this._handleSortTypeChange.bind(this);\n  }\n\n  get template() {\n    return `\n      <form class=\"trip-events__trip-sort trip-sort\" action=\"#\" method=\"get\">\n        <div class=\"trip-sort__item trip-sort__item--day\">\n          <input \n            id=\"sort-day\" \n            class=\"trip-sort__input visually-hidden\" \n            type=\"radio\" \n            name=\"trip-sort\" \n            value=\"day\"\n            ${this._currentSortType === 'day' ? 'checked' : ''}\n          >\n          <label class=\"trip-sort__btn\" for=\"sort-day\">Day</label>\n        </div>\n\n        <div class=\"trip-sort__item trip-sort__item--time\">\n          <input \n            id=\"sort-time\" \n            class=\"trip-sort__input visually-hidden\" \n            type=\"radio\" \n            name=\"trip-sort\" \n            value=\"time\"\n            ${this._currentSortType === 'time' ? 'checked' : ''}\n          >\n          <label class=\"trip-sort__btn\" for=\"sort-time\">Time</label>\n        </div>\n\n        <div class=\"trip-sort__item trip-sort__item--price\">\n          <input \n            id=\"sort-price\" \n            class=\"trip-sort__input visually-hidden\" \n            type=\"radio\" \n            name=\"trip-sort\" \n            value=\"price\"\n            ${this._currentSortType === 'price' ? 'checked' : ''}\n          >\n          <label class=\"trip-sort__btn\" for=\"sort-price\">Price</label>\n        </div>\n      </form>\n    `;\n  }\n\n  setSortTypeChangeHandler(callback) {\n    this._callback.sortTypeChange = callback;\n    this.element.addEventListener('change', this._handleSortTypeChange);\n  }\n\n  _handleSortTypeChange(evt) {\n    if (evt.target.tagName !== 'INPUT') {\n      return;\n    }\n    evt.preventDefault();\n    this._callback.sortTypeChange(evt.target.value);\n  }\n}","import AbstractView from './abstract-view.js';\n\n/**\n * Абстрактный класс представления с состоянием\n */\nexport default class AbstractStatefulView extends AbstractView {\n  /** @type {Object} Объект состояния */\n  _state = {};\n\n  /**\n   * Метод для обновления состояния и перерисовки элемента\n   * @param {Object} update Объект с обновлённой частью состояния\n   */\n  updateElement(update) {\n    if (!update) {\n      return;\n    }\n\n    this._setState(update);\n\n    this.#rerenderElement();\n  }\n\n  /**\n   * Метод для восстановления обработчиков после перерисовки элемента\n   * @abstract\n   */\n  _restoreHandlers() {\n    throw new Error('Abstract method not implemented: restoreHandlers');\n  }\n\n  /**\n   * Метод для обновления состояния\n   * @param {Object} update Объект с обновлённой частью состояния\n   */\n  _setState(update) {\n    this._state = structuredClone({...this._state, ...update});\n  }\n\n  /** Метод для перерисовки элемента */\n  #rerenderElement() {\n    const prevElement = this.element;\n    const parent = prevElement.parentElement;\n    this.removeElement();\n\n    const newElement = this.element;\n\n    parent.replaceChild(newElement, prevElement);\n\n    this._restoreHandlers();\n  }\n}\n","export const EVENT_TYPES = [\n  'taxi', 'bus', 'train', 'ship', \n  'drive', 'flight', 'check-in', \n  'sightseeing', 'restaurant'\n];\n\nexport const DESTINATION_NAMES = [\n  'Amsterdam', 'Chamonix', 'Geneva', \n  'Paris', 'Berlin', 'Rome'\n];\n\nexport const DEFAULT_EVENT = {\n  type: 'flight',\n  destination: 'geneva',\n  dateFrom: new Date(),\n  dateTo: new Date(Date.now() + 3600000),\n  basePrice: 100,\n  offers: [1, 2],\n  isFavorite: false\n};","const parseDate = (dateInput) => {\n  if (dateInput instanceof Date) {\n    return isNaN(dateInput.getTime()) ? null : dateInput;\n  }\n  const date = new Date(dateInput);\n  return isNaN(date.getTime()) ? null : date;\n};\n\nexport const formatDate = (dateInput) => {\n  const date = parseDate(dateInput);\n  if (!date) {\n    console.error('Invalid date input:', dateInput);\n    return 'N/A';\n  }\n  \n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric'\n  });\n};\n\nexport const formatTime = (dateInput) => {\n  const date = parseDate(dateInput);\n  if (!date) {\n    console.error('Invalid date input:', dateInput);\n    return 'N/A';\n  }\n  \n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\nexport const calculateDuration = (dateFromInput, dateToInput) => {\n  const dateFrom = parseDate(dateFromInput);\n  const dateTo = parseDate(dateToInput);\n\n  if (!dateFrom || !dateTo) {\n    console.error('Invalid dates:', { dateFromInput, dateToInput });\n    return 'N/A';\n  }\n\n  const diff = dateTo - dateFrom;\n  \n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n  if (days > 0) {\n    return `${days}D ${hours}H ${minutes}M`;\n  }\n  if (hours > 0) {\n    return `${hours}H ${minutes}M`;\n  }\n  return `${minutes}M`;\n};","\nimport AbstractStatefulView from '../framework/view/abstract-stateful-view.js';\nimport {EVENT_TYPES, DEFAULT_EVENT} from '../const';\nimport {formatDate, formatTime} from '../utils/date';\n\nexport default class EventEditView extends AbstractStatefulView {\n  constructor(event = DEFAULT_EVENT, destinationsModel, offersModel) {\n    super();\n    this._destinationsModel = destinationsModel;\n    this._offersModel = offersModel;\n    this._state = { ...event };\n    this._callback = {\n      close: () => {},\n      submit: () => {},\n      delete: () => {}\n    }; \n    \n    this.#setHandlers();\n  }\n  get template() {\n    const {type, destination: destinationId, dateFrom, dateTo, basePrice, offers: selectedOfferIds} = this._state;\n    \n    \n    const destination = this._destinationsModel.getDestinationById(destinationId);\n    const typeOffers = this._offersModel.getOffersByType(type);\n    const allDestinations = this._destinationsModel.getDestinations();\n\n    return `\n      <li class=\"trip-events__item\">\n        <form class=\"event event--edit\" action=\"#\" method=\"post\">\n          <header class=\"event__header\">\n            <!-- Тип события -->\n            <div class=\"event__type-wrapper\">\n              <label class=\"event__type event__type-btn\" for=\"event-type-toggle\">\n                <span class=\"visually-hidden\">Choose event type</span>\n                <img class=\"event__type-icon\" width=\"17\" height=\"17\" src=\"img/icons/${type}.png\" alt=\"Event type icon\">\n              </label>\n              <input class=\"event__type-toggle visually-hidden\" id=\"event-type-toggle\" type=\"checkbox\">\n\n              <div class=\"event__type-list\">\n                <fieldset class=\"event__type-group\">\n                  <legend class=\"visually-hidden\">Event type</legend>\n                  ${EVENT_TYPES.map((eventType) => `\n                    <div class=\"event__type-item\">\n                      <input id=\"event-type-${eventType}\" class=\"event__type-input visually-hidden\" \n                        type=\"radio\" name=\"event-type\" value=\"${eventType}\" ${type === eventType ? 'checked' : ''}>\n                      <label class=\"event__type-label event__type-label--${eventType}\" for=\"event-type-${eventType}\">\n                        ${eventType}\n                      </label>\n                    </div>\n                  `).join('')}\n                </fieldset>\n              </div>\n            </div>\n\n            <!-- Пункт назначения -->\n            <div class=\"event__field-group event__field-group--destination\">\n              <label class=\"event__label event__type-output\" for=\"event-destination\">\n                ${type}\n              </label>\n              <input class=\"event__input event__input--destination\" id=\"event-destination\" \n                type=\"text\" name=\"event-destination\" value=\"${destination?.name || ''}\" list=\"destination-list\" required>\n              <datalist id=\"destination-list\">\n                ${allDestinations.map((d) => `\n                  <option value=\"${d.name}\"></option>\n                `).join('')}\n              </datalist>\n            </div>\n\n            <!-- Даты -->\n            <div class=\"event__field-group event__field-group--time\">\n              <label class=\"visually-hidden\" for=\"event-start-time\">From</label>\n              <input class=\"event__input event__input--time\" id=\"event-start-time\" \n                type=\"text\" name=\"event-start-time\" value=\"${formatDate(dateFrom)} ${formatTime(dateFrom)}\" required>\n              &mdash;\n              <label class=\"visually-hidden\" for=\"event-end-time\">To</label>\n              <input class=\"event__input event__input--time\" id=\"event-end-time\" \n                type=\"text\" name=\"event-end-time\" value=\"${formatDate(dateTo)} ${formatTime(dateTo)}\" required>\n            </div>\n\n            <!-- Цена -->\n            <div class=\"event__field-group event__field-group--price\">\n              <label class=\"event__label\" for=\"event-price\">\n                <span class=\"visually-hidden\">Price</span>\n                &euro;\n              </label>\n              <input class=\"event__input event__input--price\" id=\"event-price\" \n                type=\"number\" name=\"event-price\" value=\"${basePrice}\" min=\"1\" required>\n            </div>\n\n            <!-- Кнопки -->\n            <button class=\"event__save-btn btn btn--blue\" type=\"submit\">Save</button>\n            <button class=\"event__reset-btn\" type=\"reset\">Delete</button>\n            <button class=\"event__rollup-btn\" type=\"button\">\n              <span class=\"visually-hidden\">Close event</span>\n            </button>\n          </header>\n\n          <!-- Детали -->\n          <section class=\"event__details\">\n            <!-- Офферы -->\n            ${typeOffers.length > 0 ? `\n              <section class=\"event__section event__section--offers\">\n                <h3 class=\"event__section-title event__section-title--offers\">Offers</h3>\n                <div class=\"event__available-offers\">\n                  ${typeOffers.map((offer) => `\n                    <div class=\"event__offer-selector\">\n                      <input class=\"event__offer-checkbox visually-hidden\" id=\"event-offer-${offer.id}\" \n                        type=\"checkbox\" name=\"event-offer\" value=\"${offer.id}\" \n                        ${selectedOfferIds.includes(offer.id) ? 'checked' : ''}>\n                      <label class=\"event__offer-label\" for=\"event-offer-${offer.id}\">\n                        <span class=\"event__offer-title\">${offer.title}</span>\n                        +€&nbsp;<span class=\"event__offer-price\">${offer.price}</span>\n                      </label>\n                    </div>\n                  `).join('')}\n                </div>\n              </section>\n            ` : ''}\n\n            <!-- Описание пункта назначения -->\n            ${destination?.description ? `\n              <section class=\"event__section event__section--destination\">\n                <h3 class=\"event__section-title event__section-title--destination\">Destination</h3>\n                <p class=\"event__destination-description\">${destination.description}</p>\n                \n                ${destination.pictures?.length > 0 ? `\n                  <div class=\"event__photos-container\">\n                    ${destination.pictures.map((pic) => `\n                      <img class=\"event__photo\" src=\"${pic.src}\" alt=\"${pic.description}\">\n                    `).join('')}\n                  </div>\n                ` : ''}\n              </section>\n            ` : ''}\n          </section>\n        </form>\n      </li>\n    `;\n  }\n\n   _restoreHandlers() {\n    this.#setHandlers();\n  }\n\n  #setHandlers() {\n    \n    this.element.querySelector('.event__type-list')\n      .addEventListener('change', this.#typeChangeHandler);\n    \n    this.element.querySelector('.event__input--destination')\n      .addEventListener('change', this.#destinationChangeHandler);\n    \n    this.element.querySelector('[name=\"event-start-time\"]')\n      .addEventListener('change', this.#dateFromChangeHandler);\n    this.element.querySelector('[name=\"event-end-time\"]')\n      .addEventListener('change', this.#dateToChangeHandler);\n    \n    this.element.querySelector('.event__input--price')\n      .addEventListener('change', this.#priceChangeHandler);\n\n    \n    const offerInputs = this.element.querySelectorAll('.event__offer-checkbox');\n    offerInputs.forEach((input) => {\n      input.addEventListener('change', this.#offerChangeHandler);\n    });\n\n  \n    this.element.querySelector('.event__save-btn')\n      .addEventListener('click', this.#formSubmitHandler);\n    this.element.querySelector('.event__reset-btn')\n      .addEventListener('click', this.#deleteClickHandler);\n    \n   \n   this.element.querySelector('.event__rollup-btn')\n      .addEventListener('click', this.#closeHandler);\n    \n    \n    document.addEventListener('keydown', this.#escKeyDownHandler);\n  }\n\n#typeChangeHandler = (evt) => {\n  this.updateElement({\n    type: evt.target.value,\n    offers: []\n  });\n};\n\n#destinationChangeHandler = (evt) => {\n  const destination = this._destinationsModel.getDestinations()\n    .find((dest) => dest.name === evt.target.value);\n  \n  if (destination) {\n    this.updateElement({ destination: destination.id });\n  }\n};\n\n#dateFromChangeHandler = (evt) => {\n  this.updateElement({ dateFrom: new Date(evt.target.value) });\n};\n\n#dateToChangeHandler = (evt) => {\n  this.updateElement({ dateTo: new Date(evt.target.value) });\n};\n\n#priceChangeHandler = (evt) => {\n  this.updateElement({ basePrice: parseInt(evt.target.value, 10) });\n};\n\n#offerChangeHandler = (evt) => {\n  const offerId = parseInt(evt.target.value, 10);\n  const offers = this._state.offers.includes(offerId)\n    ? this._state.offers.filter((id) => id !== offerId)\n    : [...this._state.offers, offerId];\n\n  this.updateElement({ offers });\n};\n\n#formSubmitHandler = (evt) => {\n  evt.preventDefault();\n  this._callback.submit(EventEditView.parseStateToEvent(this._state));\n};\nstatic parseStateToEvent(state) {\n  return {\n    ...state,\n    offers: state.offers.map(offer => offer.id),\n    destination: state.destination.id\n  };\n}\n\n  #rollupClickHandler = (evt) => {\n    evt.preventDefault();\n    if (this._callback.close) { \n      this._callback.close();\n    }\n  };\n#deleteClickHandler = (evt) => {\n  evt.preventDefault();\n  this._callback.delete(this._state.id);\n};\n  #escKeyDownHandler = (evt) => {\n    if (evt.key === 'Escape') {\n      evt.preventDefault();\n      this.#closeHandler(evt);\n    }\n  };\n#closeHandler = (evt) => {\n  console.log('Close handler triggered'); \n    evt?.preventDefault();\n    this._callback.close();\n    document.removeEventListener('keydown', this.#escKeyDownHandler);\n  };\n\n  setCloseHandler(callback) {\n    this._callback.close = callback;\n    return this;\n  }\n  setSubmitHandler(callback) {\n  this._callback.submit = callback;\n   return this\n}\n\nsetDeleteHandler(callback) {\n  this._callback.delete = callback;\n   return this\n}\n\n  _restoreHandlers() {\n    this.#setHandlers();\n  }\n\n  removeElement() {\n    document.removeEventListener('keydown', this.#escKeyDownHandler);\n    super.removeElement();\n  }\n  \n}","import AbstractStatefulView from '../framework/view/abstract-stateful-view.js';\nimport { formatDate, formatTime, calculateDuration } from '../utils/date.js';\n\nexport default class EventView extends AbstractStatefulView {\n  constructor(event, destinationsModel, offersModel) {\n    super();\n    console.log('EventView created for event:', event.id);\n    this._state = { ...event };\n    this._destinationsModel = destinationsModel;\n    this._offersModel = offersModel;\n    this._callback = {};\n    this.#setHandlers();\n  }\n  get template() {\n    const { type, destination, dateFrom, dateTo, basePrice, isFavorite, offers } = this._state;\n  \n  const destinationData = typeof destination === 'object' \n    ? destination \n    : this._destinationsModel.getDestinationById(destination);\n\n  if (!destinationData) {\n    console.error(`Destination data not found for:`, destination);\n    return '<div class=\"error\">Invalid destination</div>';\n  }\n    const typeOffers = this._offersModel.getOffersByType(type);\n    const selectedOffers = typeOffers.filter(offer => this._state.offers.includes(offer.id));\n\n    return `\n      <li class=\"trip-events__item\">\n        <div class=\"event\">\n          <time class=\"event__date\" datetime=\"${dateFrom.toISOString()}\">${formatDate(dateFrom)}</time>\n          <div class=\"event__type\">\n            <img class=\"event__type-icon\" width=\"42\" height=\"42\" \n                 src=\"img/icons/${type}.png\" alt=\"Event type icon\">\n          </div>\n          <h3 class=\"event__title\">${type} ${destinationData.name}</h3>\n          \n          <div class=\"event__schedule\">\n            <p class=\"event__time\">\n              <time datetime=\"${dateFrom.toISOString()}\">${formatTime(dateFrom)}</time>\n              &mdash;\n              <time datetime=\"${dateTo.toISOString()}\">${formatTime(dateTo)}</time>\n            </p>\n            <p class=\"event__duration\">${calculateDuration(dateFrom, dateTo)}</p>\n          </div>\n          \n          <p class=\"event__price\">\n            &euro;&nbsp;<span class=\"event__price-value\">${basePrice}</span>\n          </p>\n          \n          ${selectedOffers.length > 0 ? `\n            <h4 class=\"visually-hidden\">Offers:</h4>\n            <ul class=\"event__selected-offers\">\n              ${selectedOffers.map(offer => `\n                <li class=\"event__offer\">\n                  <span class=\"event__offer-title\">${offer.title}</span>\n                  &plus;&euro;&nbsp;\n                  <span class=\"event__offer-price\">${offer.price}</span>\n                </li>\n              `).join('')}\n            </ul>\n          ` : ''}\n          \n          <button class=\"event__favorite-btn ${isFavorite ? 'event__favorite-btn--active' : ''}\" type=\"button\">\n            <span class=\"visually-hidden\">Add to favorite</span>\n            <svg class=\"event__favorite-icon\" width=\"28\" height=\"28\" viewBox=\"0 0 28 28\">\n              <path d=\"M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z\"/>\n            </svg>\n          </button>\n          \n          <button class=\"event__rollup-btn\" type=\"button\">\n            <span class=\"visually-hidden\">Open event</span>\n          </button>\n        </div>\n      </li>\n    `;\n  }\n\n #setHandlers() {\n  const rollupBtn = this.element.querySelector('.event__rollup-btn');\n  const favoriteBtn = this.element.querySelector('.event__favorite-btn');\n  \n  if (!rollupBtn || !favoriteBtn) {\n    console.error('Кнопки не найдены:', { rollupBtn, favoriteBtn });\n    return;\n  }\n\n  rollupBtn.addEventListener('click', this.#rollupClickHandler);\n  favoriteBtn.addEventListener('click', this.#favoriteClickHandler);\n}\n\n \n  _restoreHandlers() {\n    this.#setHandlers();\n  }\n\n #favoriteClickHandler = (evt) => {\n    evt.preventDefault();\n    this._callback.favoriteClick?.();\n  };\n  #rollupClickHandler = (evt) => {\n    evt.preventDefault();\n    this._callback.rollupClick();\n  };\n\n   setFavoriteClickHandler(callback) {\n    this._callback.favoriteClick = callback;\n    return this;\n  }\n\n setRollupClickHandler(callback) {\n    this._callback.rollupClick = callback;\n    return this;\n  }\n \n    setEditClickHandler(callback) {\n    this._callback.editClick = callback;\n    return this;\n  }\n\n  \n}","export const formatDate = (date) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n};\n\nexport const getTripTitle = (events, destinations) => {\n    if (events.length === 0) return '';\n    \n    const destinationNames = events\n      .map((event) => destinations.find((d) => d.id === event.destination)?.name)\n      .filter(Boolean);\n  \n    if (destinationNames.length <= 3) {\n      return destinationNames.join(' — ');\n    }\n  \n    return `${destinationNames[0]} — ... — ${destinationNames[destinationNames.length - 1]}`;\n  };\n  \n  export const calculateTotalPrice = (events) => {\n    return events.reduce((total, event) => total + event.basePrice, 0);\n  };","import AbstractView from '../framework/view/abstract-view.js';\nimport {formatDate, getTripTitle, calculateTotalPrice} from '../utils/trip';\n\nexport default class TripInfoView extends AbstractView {\n  constructor(events, destinations) {\n    super();\n    this._events = events;\n    this._destinations = destinations;\n  }\n\n  get template() {\n    if (this._events.length === 0) {\n      return '<div></div>';\n    }\n    \n    const sortedEvents = [...this._events].sort((a, b) => a.dateFrom - b.dateFrom);\n    const startDate = sortedEvents[0].dateFrom;\n    const endDate = sortedEvents[sortedEvents.length - 1].dateTo;\n\n    return `\n      <section class=\"trip-main__trip-info  trip-info\">\n        <div class=\"trip-info__main\">\n          <h1 class=\"trip-info__title\">${getTripTitle(sortedEvents, this._destinations)}</h1>\n          <p class=\"trip-info__dates\">${formatDate(startDate)}&nbsp;&mdash;&nbsp;${formatDate(endDate)}</p>\n        </div>\n        <p class=\"trip-info__cost\">\n          Total: &euro;&nbsp;<span class=\"trip-info__cost-value\">${calculateTotalPrice(this._events)}</span>\n        </p>\n      </section>\n    `;\n  }\n}","import AbstractView from '../framework/view/abstract-view.js';\n\nexport default class NewEventButtonView extends AbstractView {\n  get template() {\n    return `\n      <button class=\"trip-main__event-add-btn btn btn--big btn--yellow\" type=\"button\">\n      <button class=\"trip-main__event-add-btn btn btn--big btn--yellow\" type=\"button\">\n        <span class=\"visually-hidden\">New event</span>+ New event\n      </button>\n    `;\n  }\n}","//новый\nimport AbstractView from '../src/framework/view/abstract-view.js';\n\n/** @enum {string} Перечисление возможных позиций для отрисовки */\nconst RenderPosition = {\n  BEFOREBEGIN: 'beforebegin',\n  AFTERBEGIN: 'afterbegin',\n  BEFOREEND: 'beforeend',\n  AFTEREND: 'afterend',\n};\n\n/**\n * Функция для создания элемента на основе разметки\n * @param {string} template Разметка в виде строки\n * @returns {HTMLElement} Созданный элемент\n */\nfunction createElement(template) {\n  const newElement = document.createElement('div');\n  newElement.innerHTML = template;\n\n  return newElement.firstElementChild;\n}\n\n/**\n * Функция для отрисовки элемента\n * @param {AbstractView} component Компонент, который должен был отрисован\n * @param {HTMLElement} container Элемент в котором будет отрисован компонент\n * @param {string} place Позиция компонента относительно контейнера. По умолчанию - `beforeend`\n */\nfunction render(component, container, place = RenderPosition.BEFOREEND) {\n  if (!(component instanceof AbstractView)) {\n    throw new Error('Can render only components');\n  }\n\n  if (container === null) {\n    throw new Error('Container element doesn\\'t exist');\n  }\n\n  container.insertAdjacentElement(place, component.element);\n}\n\n/**\n * Функция для замены одного компонента на другой\n * @param {AbstractView} newComponent Компонент, который нужно показать\n * @param {AbstractView} oldComponent Компонент, который нужно скрыть\n */\nfunction replace(newComponent, oldComponent) {\n  const parent = oldComponent.element.parentElement;\n  if (!parent) {\n    throw new Error('Can\\'t replace unexisting parent');\n  }\n  \n parent.replaceChild(newComponent.element, oldComponent.element);\n  oldComponent.removeElement();\n}\n\n\n/**\n * Функция для удаления компонента\n * @param {AbstractView} component Компонент, который нужно удалить\n */\nfunction remove(component) {\n  if (component === null) {\n    return;\n  }\n\n  if (!(component instanceof AbstractView)) {\n    throw new Error('Can remove only components');\n  }\n\n  component.element.remove();\n  component.removeElement();\n}\n\nexport {RenderPosition, createElement, render, replace, remove};\n","\nimport FiltersView from '../view/filters-view';\nimport SortView from '../view/sort-view';\nimport EventEditView from '../view/event-edit-view';\nimport EventView from '../view/event-view';\nimport TripInfoView from '../view/trip-info-view';\nimport NewEventButtonView from '../view/new-event-button-view';\nimport EmptyListView from '../view/empty-list-view';\nimport {DEFAULT_EVENT} from '../const';\nimport {render, replace, RenderPosition} from '../render';\nconst SortType = {\n  DAY: 'day',\n  TIME: 'time',\n  PRICE: 'price'\n};\n\nexport default class TripPresenter {\n  \nconstructor(containers, eventsModel, destinationsModel, offersModel) {\n  if (!containers.eventsContainer || !containers.mainContainer) {\n    throw new Error('Containers not provided');\n  }\n  this._eventsContainer = containers.eventsContainer;\n  this._mainContainer = containers.mainContainer;\n  this._eventsModel = eventsModel; \n  this._destinationsModel = destinationsModel;\n  this._offersModel = offersModel;\n  \n    this._currentSortType = SortType.DAY;\n    this._tripInfoComponent = null;\n    this._filtersComponent = null;\n    this._sortComponent = null;\n    this._newEventButtonComponent = null;\n    \n    this._handleSortTypeChange = this._handleSortTypeChange.bind(this);\n    this._handleNewEventClick = this._handleNewEventClick.bind(this);\n    \n\n     this._currentEventComponent = null;\n    this._currentEditForm = null;\n  }\ninit() {\n  console.log('Trip container:', this._eventsContainer);\n  console.log('List element:', this._eventsContainer.querySelector('.trip-events__list'));\n  console.log('Проверка данных:', {\n    events: this._eventsModel.getEvents(), \n    destinations: this._destinationsModel.getDestinations(),\n    offers: this._offersModel.getOffers()\n  });\n  this._renderTripInfo();\n  this._renderFilters();\n  this._renderSort();\n  this._renderEventsList();\n  this._renderNewEventButton();\n}\n\n\nshowTestEditForm() {\n  this._clearEventsList();\n  const testEvent = this._eventsModel.getEvents()[0]; \n  render(\n    new EventEditView(\n      testEvent,\n      this._destinationsModel,\n      this._offersModel\n    ),\n    this._eventsContainer.querySelector('.trip-events__list')\n  );\n}\n  _renderTripInfo() {\n    const container = this._mainContainer.querySelector('.trip-main__trip-info');\n    if (!container) {\n      console.error('Trip info container not found');\n      return;\n    }\n    \n    const events = this._eventsModel.getEvents();\n    const destinations = this._destinationsModel.getDestinations();\n    \n    container.innerHTML = '';\n    this._tripInfoComponent = new TripInfoView(events, destinations);\n    render(this._tripInfoComponent, container);\n  }\n\n  _renderNewEventButton() {\n    this._newEventButtonComponent = new NewEventButtonView();\n    render(this._newEventButtonComponent, this._mainContainer);\n    this._newEventButtonComponent.getElement()\n      .addEventListener('click', this._handleNewEventClick);\n  }\n\n  _renderFilters() {\n  const filtersContainer = this._eventsContainer.querySelector('.trip-controls__filters');\n  if (!filtersContainer) {\n    return;\n  }\n  filtersContainer.innerHTML = '';\n  const filters = [\n    { type: 'everything', name: 'Everything', count: this._eventsModel.getEvents().length },\n    { type: 'future', name: 'Future', count: this._eventsModel.getFutureEvents().length },\n    { type: 'past', name: 'Past', count: this._eventsModel.getPastEvents().length }\n  ];\n  this._filtersComponent = new FiltersView(filters, 'everything');\n  render(this._filtersComponent, filtersContainer); \n}\n\n  _renderSort() {\n     const sortContainer = this._eventsContainer.querySelector('.trip-events__trip-sort');\n    \n    if (!sortContainer) {\n    return;\n  }\n  sortContainer.innerHTML = '';\n  this._sortComponent = new SortView(this._currentSortType);\n  render(this._sortComponent, sortContainer);\n  }\n\n#escKeyDownHandler = (evt) => {\n    if (evt.key === 'Escape' && this._editFormComponent) {\n      evt.preventDefault();\n      this.#replaceFormToEvent();\n    }\n  };\n\n  #replaceFormToEvent() {\n    if (this._editFormComponent && this._eventComponent) {\n      replace(this._eventComponent, this._editFormComponent);\n      document.removeEventListener('keydown', this.#escKeyDownHandler);\n      this._editFormComponent = null;\n    }\n  }\n\n  _renderNewEventButton() {\n     const container = this._eventsContainer.querySelector('.trip-main');\n  if (!container) {\n    return;\n  } \n  this._newEventButtonComponent = new NewEventButtonView();\n  render(this._newEventButtonComponent, container);\n  this._newEventButtonComponent.getElement()\n    .addEventListener('click', this._handleNewEventClick);\n  }\n\n  _handleSortTypeChange(sortType) {\n    this._currentSortType = sortType;\n    this._clearEventsList();\n    this._renderEventsList();\n  }\n\n _handleNewEventClick() {\n  this.#replaceFormToEvent(); \n    \n    const eventsListElement = this._eventsContainer.querySelector('.trip-events__list');\n    if (!eventsListElement) return;\n    \n    const newEventForm = new EventEditView(\n      DEFAULT_EVENT,\n      this._destinationsModel,\n      this._offersModel\n    );\n    \n    newEventForm.setCloseHandler(() => {\n      this._renderEventsList();\n    });\n    \n    eventsListElement.innerHTML = '';\n    render(newEventForm, eventsListElement);\n    this._editFormComponent = newEventForm;\n    document.addEventListener('keydown', this.#escKeyDownHandler);\n  }\n\n  _clearEventsList() {\n   const list = this._eventsContainer.querySelector('.trip-events__list'); \n  if (list) list.innerHTML = '';\n  }\n\n  _getSortedEvents() {\n  switch (this._currentSortType) {\n    case SortType.TIME:\n      return this._eventsModel.getEventsSortedByTime();\n    case SortType.PRICE:\n      return this._eventsModel.getEventsSortedByPrice();\n    default: \n      return this._eventsModel.getEventsSortedByDay();\n    }\n  }\n    _renderEventsList() {\n  const eventsListElement = this._eventsContainer.querySelector('.trip-events__list');\n  if (!eventsListElement) {\n    console.error('Events list container not found');\n    return;\n  }\n\n  eventsListElement.innerHTML = '';\n  const events = this._getSortedEvents();\n  console.log('Rendering events:', events); \n\n  events.forEach(event => {\n    const eventComponent = new EventView(event, this._destinationsModel, this._offersModel);\n    render(eventComponent, eventsListElement);\n    const rollupBtn = eventComponent.element.querySelector('.event__rollup-btn');\n    console.log('Rollup button exists:', !!rollupBtn);\n    eventComponent.setRollupClickHandler(() => {\n      console.log('Rollup clicked for event:', event.id);\n      this._openEditForm(event, eventComponent);\n    });\n  });\n}\n _openEditForm(event, eventComponent) {\n  if (this._currentEditForm) {\n    this._replaceFormToEvent();\n  }\n\n  const editFormComponent = new EventEditView(\n    event,\n    this._destinationsModel,\n    this._offersModel\n  );\n\n  editFormComponent.setCloseHandler(() => this._replaceFormToEvent());\n  editFormComponent.setSubmitHandler((updatedEvent) => { \n    this._handleEventChange(updatedEvent);\n    this._replaceFormToEvent();\n  });\n  \n  editFormComponent.setDeleteHandler((eventId) => {\n    this._eventsModel.deleteEvent(eventId);\n    this._renderTripInfo();\n    this._renderEventsList();\n  });\n\n  this._currentEventComponent = eventComponent;\n  this._currentEditForm = editFormComponent;\n\n  replace(editFormComponent, eventComponent);\n  document.addEventListener('keydown', this._escKeyDownHandler);\n}\n\n\n_handleEventChange(updatedEvent) {\n  this._eventsModel.updateEvent(updatedEvent);\n  this._renderTripInfo(); \n}\n\n_replaceFormToEvent() {\n  if (!this._currentEventComponent || !this._currentEditForm) return;\n  \n  replace(this._currentEventComponent, this._currentEditForm);\n  document.removeEventListener('keydown', this._escKeyDownHandler);\n  this._currentEditForm = null;\n  this._currentEventComponent = null;\n}\n_escKeyDownHandler = (evt) => {\n  if (evt.key === 'Escape' && this._currentEditForm) {\n    evt.preventDefault();\n    this.#replaceFormToEvent();\n  }\n};\n\n}","export default class EventsModel {\n  constructor() {\n    this._events = [];\n    this._destinationsModel = null;\n    this._offersModel = null;\n  }\n   setEvents(events) {\n    this._events = events.map(event => ({\n    ...event,\n    dateFrom: new Date(event.dateFrom),\n    dateTo: new Date(event.dateTo)\n  }));\n  }\n\n  setDestinationsModel(model) {\n    this._destinationsModel = model;\n  }\n\n  setOffersModel(model) {\n    this._offersModel = model;\n  }\n\n  getEvents() {\n  return this._events.map(event => {\n    const destination = this._destinationsModel.getDestinationById(event.destination);\n    if (!destination) {\n      console.warn(`Destination not found for event ${event.id}: ${event.destination}`);\n      return null; // или вернуть event с флагом ошибки\n    }\n    return {\n      ...event,\n      destination: destination,\n      offers: this._offersModel.getOffersByType(event.type)\n        .filter(offer => event.offers.includes(offer.id))\n    };\n  }).filter(Boolean); \n}\n\n  addEvent(event) {\n    this._events = [...this._events, event];\n  }\n\n  updateEvent(updatedEvent) {\n    this._events = this._events.map(event => \n      event.id === updatedEvent.id ? updatedEvent : event\n    );\n  }\n\n  deleteEvent(id) {\n    this._events = this._events.filter(event => event.id !== id);\n  }\n\n  getFutureEvents() {\n    const now = new Date();\n    return this.getEvents().filter(event => new Date(event.dateFrom) > now);\n  }\n\n  getPastEvents() {\n    const now = new Date();\n    return this.getEvents().filter(event => new Date(event.dateTo) < now);\n  }\n\n  getPresentEvents() {\n    const now = new Date();\n    return this.getEvents().filter(event => \n      new Date(event.dateFrom) <= now && new Date(event.dateTo) >= now\n    );\n  }\n\n  // Методы сортировки\n  getEventsSortedByDay() {\n    return [...this.getEvents()].sort((a, b) => \n      new Date(a.dateFrom) - new Date(b.dateFrom)\n    );\n  }\n\n  getEventsSortedByTime() {\n    return [...this.getEvents()].sort((a, b) => \n      (new Date(b.dateTo) - new Date(b.dateFrom)) - \n      (new Date(a.dateTo) - new Date(a.dateFrom))\n    );\n  }\n\n  getEventsSortedByPrice() {\n    return [...this.getEvents()].sort((a, b) => b.basePrice - a.basePrice);\n  }\n}","export default class DestinationsModel {\n  constructor() {\n    this._destinations = [];\n  }\n\n  getDestinations() {\n    return this._destinations;\n  }\n\n  getDestinationById(id) {\n    return this._destinations.find(destination => destination.id === id);\n  }\n\n  setDestinations(destinations) {\n    this._destinations = destinations;\n  }\n}","export default class OffersModel {\n  constructor() {\n    this._offers = [];\n  }\n\n  getOffers() {\n    return this._offers;\n  }\n\n  getOffersByType(type) {\n    const offerGroup = this._offers.find(offer => offer.type === type);\n    return offerGroup ? offerGroup.offers : [];\n  }\n\n  setOffers(offers) {\n    this._offers = offers;\n  }\n}","export const DESTINATIONS = [\n  {\n    id: 'ams',\n    name: 'Amsterdam',\n    description: 'Столица Нидерландов с каналами, велосипедами и музеями Ван Гога.',\n    pictures: [\n      {\n        src: 'https://loremflickr.com/248/152?random=21',\n        description: 'Амстердам с высоты птичьего полёта'\n      }\n    ]\n  },\n  {\n    id: 'gva',\n    name: 'Geneva',\n    description: 'Жемчужина Швейцарии на берегу Женевского озера.',\n    pictures: [\n      {\n        src: 'https://loremflickr.com/248/152?random=22',\n        description: 'Фонтан Же-д’О в Женеве'\n      }\n    ]\n  },\n  {\n    id: 'chx',\n    name: 'Chamonix',\n    description: 'Горнолыжный курорт у подножия Монблана.',\n    pictures: [\n      {\n        src: 'https://loremflickr.com/248/152?random=23',\n        description: 'Вид на Монблан из Шамони'\n      }\n    ]\n  }\n];","export const OFFERS = [\n  {\n    type: 'taxi',\n    offers: [\n      { id: 1, title: 'Повысить класс', price: 20 },\n      { id: 2, title: 'Детское кресло', price: 10 }\n    ]\n  },\n  {\n    type: 'flight',\n    offers: [\n      { id: 1, title: 'Бизнес-класс', price: 150 },\n      { id: 2, title: 'Доп. багаж', price: 50 }\n    ]\n  },\n  {\n    type: 'drive',\n    offers: [\n      { id: 1, title: 'Завтрак', price: 15 },\n      { id: 2, title: 'Улучшенный номер', price: 80 }\n    ]\n  }\n];","export const EVENTS = [\n  {\n    id: '1',\n    type: 'taxi',\n    destination: 'ams',\n     dateFrom: '2024-06-10T10:00:00', \n    dateTo: '2024-06-10T11:00:00',  \n    basePrice: 50,\n    offers: [1],\n    isFavorite: false\n  },\n  {\n    id: '2',\n    type: 'flight',\n    destination: 'gva',\n     dateFrom: '2024-06-10T10:00:00', \n    dateTo: '2024-06-10T11:00:00',  \n    basePrice: 200,\n    offers: [1, 2],\n    isFavorite: true\n  },\n  {\n    id: '3',\n    type: 'drive',\n    destination: 'chx',\n     dateFrom: '2024-06-10T10:00:00', \n    dateTo: '2024-06-10T11:00:00',  \n    basePrice: 300,\n    offers: [2],\n    isFavorite: false\n  }\n];","import TripPresenter from './presenter/trip-presenter';\nimport EventsModel from './model/events-model';\nimport DestinationsModel from './model/destinations-model';\nimport OffersModel from './model/offers-model';\nimport { DESTINATIONS, OFFERS, EVENTS } from './mock';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const tripMainContainer = document.querySelector('.trip-main');\n  const tripEventsContainer = document.querySelector('.trip-events');\n  EVENTS.forEach(event => {\n  if (!DESTINATIONS.some(d => d.id === event.destination)) {\n    console.error(`Event ${event.id} has invalid destination: ${event.destination}`);\n  }\n});\nEVENTS.forEach(event => {\n  const typeOffers = OFFERS.find(o => o.type === event.type)?.offers || [];\n  event.offers.forEach(offerId => {  \n  if (!typeOffers.some(o => o.id === offerId)) {\n    console.error(`Event ${event.id} has invalid offer ID: ${offerId}`);\n  }\n});\n});\n  if (!tripMainContainer || !tripEventsContainer) {\n    console.error('Ошибка: не найдены необходимые контейнеры');\n    console.log('tripMainContainer:', tripMainContainer);\n    console.log('tripEventsContainer:', tripEventsContainer);\n    return;\n  }\n  const destinationsModel = new DestinationsModel();\n  const offersModel = new OffersModel();\n  const eventsModel = new EventsModel();\n  try {\n    destinationsModel.setDestinations(DESTINATIONS);\n    offersModel.setOffers(OFFERS);\n    eventsModel.setEvents(EVENTS);\n    \n    eventsModel.setDestinationsModel(destinationsModel);\n    eventsModel.setOffersModel(offersModel);\n  } catch (error) {\n    console.error('Ошибка при загрузке данных:', error);\n    return;\n  }\n  console.log('Проверка данных перед инициализацией:');\n  console.log('Destinations:', destinationsModel.getDestinations());\n  console.log('Offers:', offersModel.getOffers());\n  console.log('Events:', eventsModel.getEvents());\n  try {\n  const tripPresenter = new TripPresenter(\n    {\n      eventsContainer: tripEventsContainer,\n      mainContainer: tripMainContainer\n    },\n    eventsModel,\n    destinationsModel,\n    offersModel\n  );\n  tripPresenter.init();\n  console.log('Презентер успешно инициализирован');\n  } \n  \n  catch (error) {\n  console.error('Ошибка при инициализации презентера:', error)\n  } \n\n});"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","SHAKE_CLASS_NAME","AbstractView","constructor","template","newElement","innerHTML","firstElementChild","removeElement","shake","callback","classList","add","setTimeout","FiltersView","filters","currentFilter","super","_filters","_currentFilter","filter","type","name","SortView","currentSortType","_currentSortType","_callback","_handleSortTypeChange","bind","setSortTypeChangeHandler","sortTypeChange","addEventListener","evt","tagName","preventDefault","value","AbstractStatefulView","_state","updateElement","_setState","_restoreHandlers","structuredClone","prevElement","parent","parentElement","replaceChild","EVENT_TYPES","DEFAULT_EVENT","destination","dateFrom","Date","dateTo","now","basePrice","offers","isFavorite","parseDate","dateInput","isNaN","getTime","date","formatDate","toLocaleDateString","month","day","console","error","formatTime","toLocaleTimeString","hour","minute","EventEditView","event","arguments","destinationsModel","offersModel","_destinationsModel","_offersModel","close","submit","delete","destinationId","selectedOfferIds","getDestinationById","typeOffers","getOffersByType","allDestinations","getDestinations","eventType","offer","includes","title","price","description","pictures","pic","src","querySelectorAll","forEach","input","find","dest","parseInt","offerId","parseStateToEvent","state","log","removeEventListener","setCloseHandler","setSubmitHandler","setDeleteHandler","EventView","destinationData","selectedOffers","toISOString","calculateDuration","dateFromInput","dateToInput","diff","days","Math","floor","hours","minutes","rollupBtn","favoriteBtn","favoriteClick","rollupClick","setFavoriteClickHandler","setRollupClickHandler","setEditClickHandler","editClick","TripInfoView","events","destinations","_events","_destinations","sortedEvents","sort","b","startDate","endDate","getTripTitle","destinationNames","Boolean","reduce","total","NewEventButtonView","render","component","container","place","insertAdjacentElement","replace","newComponent","oldComponent","TripPresenter","containers","eventsModel","eventsContainer","mainContainer","_eventsContainer","_mainContainer","_eventsModel","_tripInfoComponent","_filtersComponent","_sortComponent","_newEventButtonComponent","_handleNewEventClick","_currentEventComponent","_currentEditForm","init","getEvents","getOffers","_renderTripInfo","_renderFilters","_renderSort","_renderEventsList","_renderNewEventButton","showTestEditForm","_clearEventsList","testEvent","getElement","filtersContainer","getFutureEvents","getPastEvents","sortContainer","_editFormComponent","_eventComponent","sortType","eventsListElement","newEventForm","_getSortedEvents","getEventsSortedByTime","getEventsSortedByPrice","getEventsSortedByDay","eventComponent","_openEditForm","_replaceFormToEvent","editFormComponent","updatedEvent","_handleEventChange","eventId","deleteEvent","_escKeyDownHandler","updateEvent","EventsModel","setEvents","setDestinationsModel","model","setOffersModel","warn","addEvent","getPresentEvents","DestinationsModel","setDestinations","OffersModel","_offers","offerGroup","setOffers","DESTINATIONS","OFFERS","EVENTS","tripMainContainer","tripEventsContainer","some"],"sourceRoot":""}